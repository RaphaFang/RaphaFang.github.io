<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Data Verification</title>
  </head>
  <body>
    <form id="dataForm">
      <label for="email">Email:</label>
      <input type="email" id="email" name="email" />
      <span id="emailError" style="color: red"></span><br />

      <label for="password">Password:</label>
      <input
        id="password"
        name="password"
        type="password"
        pattern="^[A-Za-z0-9@#$%]{4,8}$"
        title="Password must be 4-8 characters long and include only alphabets, numbers, and @#$%"
      />
      <span id="passwordError" style="color: red"></span><br />

      <label for="tel">tel:</label>
      <input
        type="tel"
        id="tel"
        maxlength="12"
        pattern="^[0-9]{4}-[0-9]{3}-[0-9]{3}$"
        title="Phone number format: 123-456-7890"
      />
      <span id="telError" style="color: red"></span><br />

      <button type="submit">Submit</button>
    </form>

    <script>
      document.addEventListener("DOMContentLoaded", function () {
        document
          .getElementById("dataForm")
          .addEventListener("submit", function (event) {
            event.preventDefault();
            let email = document.getElementById("email").value;
            let password = document.getElementById("password").value;
            let tel = document.getElementById("tel").value;

            let emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            let passwordRegex = /^[A-Za-z0-9@#$%]{4,8}$/;
            let telRegex = /^[0-9]{4}-[0-9]{3}-[0-9]{3}$/;

            let emailError = document.getElementById("emailError");
            let passwordError = document.getElementById("passwordError");
            let telError = document.getElementById("telError");

            emailError.textContent = "";
            passwordError.textContent = "";
            telError.textContent = "";

            if (!emailRegex.test(email)) {
              emailError.textContent = "Invalid email format";
            }
            if (!passwordRegex.test(password)) {
              passwordError.textContent =
                "Password must be 4-8 characters long and include only alphabets, numbers, and @#$%";
            }
            if (!telRegex.test(tel)) {
              telError.textContent = "Invalid tel format";
            }

            if (
              emailRegex.test(email) &&
              passwordRegex.test(password) &&
              telRegex.test(tel)
            ) {
              this.submit();
            }

            // const telInput = document.getElementById("tel");
            // const telError = document.getElementById("telError");

            // telInput.addEventListener("input", function (event) {
            //   let value = telInput.value.replace(/\D/g, "");
            //   let formattedValue = "";

            //   if (value.length > 0) {
            //     formattedValue = value.substring(0, 3);
            //   }
            //   if (value.length > 3) {
            //     formattedValue += "-" + value.substring(3, 6);
            //   }
            //   if (value.length > 6) {
            //     formattedValue += "-" + value.substring(6, 12);
            //   } // value.substring(6, 12) automatically lock the max length you could input

            //   telInput.value = formattedValue;
            // });
          });
      });
    </script>
  </body>
</html>
